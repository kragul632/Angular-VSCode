<!-- src/app/home/home.html -->
<div class="container my-4">
  <!-- Success message (e.g., after delete) -->
  <div *ngIf="successMessage" class="alert alert-success mb-3" role="alert" aria-live="polite">
    {{ successMessage }}
  </div>

  <!-- Header row with title (left) and tools (right) -->
  <div class="d-flex align-items-center mb-3">
    <h2 class="h4 m-0">Objects from API</h2>

    <!-- Right-side tools: search + add new -->
    <div class="ms-auto d-flex align-items-center gap-2">
      <!-- Search (right-aligned, compact width) -->
      <div class="d-none d-md-block" style="min-width: 260px; max-width: 420px;">
        <input
          type="search"
          class="form-control form-control-sm"
          placeholder="Search by name or spec (e.g., color, 128 GB, price)"
          [(ngModel)]="searchTerm"
          aria-label="Search items"
        />
      </div>

      <!-- Add New button (optional) -->
      <a class="btn btn-primary btn-sm" routerLink="/items/new" aria-label="Add new item">
        + Add New
      </a>
    </div>
  </div>

  <!-- For small screens, show search below title (optional).
       Remove this block if you don't want a duplicate search on mobile. -->
  <div class="row g-2 mb-3 d-md-none">
    <div class="col-12">
      <input
        type="search"
        class="form-control form-control-sm"
        placeholder="Search by name or spec (e.g., color, 128 GB, price)"
        [(ngModel)]="searchTerm"
        aria-label="Search items"
      />
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="alert alert-info" role="alert" aria-live="polite">
    No data yet â€” fetching from API...
  </div>

  <!-- Error -->
  <div *ngIf="!loading && error" class="alert alert-danger" role="alert">
    {{ error }}
  </div>

  <!-- Grid (uses filtered) -->
  <div class="row g-3" *ngIf="!loading && !error && filtered.length > 0">
    <div class="col-12 col-md-6 col-lg-4"
         *ngFor="let item of filtered; trackBy: trackById">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title mb-2">{{ item.name }}</h5>

          <!-- Curated specs (tight label/value) -->
          <ng-container *ngIf="item.specs && item.specs.length; else noSpecs">
            <dl class="row mb-0 lh-sm specs">
              <ng-container *ngFor="let s of item.specs">
                <dt class="col-5 col-sm-4 text-secondary specs-label">
                  {{ s.label }}
                </dt>
                <dd class="col-7 col-sm-8 fw-semibold text-body specs-value">
                  {{ s.value }}
                </dd>
              </ng-container>
            </dl>
          </ng-container>

          <ng-template #noSpecs>
            <p class="text-body-secondary mb-0">No specs available.</p>
          </ng-template>

          <!-- Full-card link -->
          <a class="stretched-link"
             [routerLink]="['/items', item.id]"
             [attr.aria-label]="'Open ' + (item.name || 'item')">
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- No matches (search active but filtered empty) -->
  <div *ngIf="!loading && !error && filtered.length === 0 && (searchTerm || '').length > 0"
       class="alert alert-warning d-flex justify-content-between align-items-center"
       role="alert" aria-live="polite">
    <span>No results for "<strong>{{ searchTerm }}</strong>".</span>
    <a class="btn btn-sm btn-primary" routerLink="/items/new">+ Add New</a>
  </div>

  <!-- Empty (no data without search) -->
  <div *ngIf="!loading && !error && data.length === 0 && (searchTerm || '').length === 0"
       class="alert alert-warning d-flex justify-content-between align-items-center"
       role="alert" aria-live="polite">
    <span>No items found.</span>
    <a class="btn btn-sm btn-primary" routerLink="/items/new">+ Add New</a>
  </div>
</div>